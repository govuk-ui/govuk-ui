{"version":3,"file":"GovScript-04710f98.js","sources":["../../src/stories/extras/GovScript.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\n\n/**\n * This component is used to hydrate the govuk-frontend javascript components when the page is loaded.\n * This is needed as Storybook uses iframes to render the components so running the js in the head\n * of the document means components haven't rendered by the time the js tries to run.\n * This component needs to be added to the story file for each component that uses the govuk-frontend js.\n *\n * @param {string} [fireAfter] - The id of the component to wait for before running the js.\n */\nexport const GovScript = ({ fireAfter }) => {\n  useEffect(() => {\n    if (!fireAfter) {\n      setTimeout(() => {\n        window.GOVUKFrontend.initAll();\n      }, 100);\n    } else {\n      const componentLoaded = document.getElementById(fireAfter);\n      if (componentLoaded) {\n        window.GOVUKFrontend.initAll();\n      } else {\n        const observer = new MutationObserver(() => {\n          const componentLoaded = document.getElementById(fireAfter);\n          if (componentLoaded) {\n            observer.disconnect();\n            window.GOVUKFrontend.initAll();\n          }\n        });\n        observer.observe(document, { subtree: true, childList: true });\n\n        return () => observer.disconnect();\n      }\n    }\n  }, []);\n\n  return <></>;\n};\n"],"names":["GovScript","fireAfter","useEffect","observer","jsx","Fragment"],"mappings":"6FAUA,MAAAA,EAAA,CAAA,CAAA,UAAAC,MACAC,EAAAA,UAAA,IAAA,CACA,GAAA,CAAAD,EACA,WAAA,IAAA,CACA,OAAA,cAAA,WACA,GAAA,UAEA,SAAA,eAAAA,CAAA,EAEA,OAAA,cAAA,cACA,CACA,MAAAE,EAAA,IAAA,iBAAA,IAAA,CACA,SAAA,eAAAF,CAAA,IAEAE,EAAA,WAAA,EACA,OAAA,cAAA,UACA,CACA,EACA,OAAAA,EAAA,QAAA,SAAA,CAAA,QAAA,GAAA,UAAA,GAAA,EAEA,IAAAA,EAAA,YACA,CAEA,EAAA,CAAA,CAAA,EAEAC,EAAAC,EAAA,CAAA,CAAA;;;;;"}