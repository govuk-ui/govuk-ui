{"version":3,"file":"CookieBanner-4e4c2acf.js","sources":["../../src/stories/components/CookieBanner/CookieBanner.mdx"],"sourcesContent":["import { Meta } from '@storybook/blocks';\nimport { Canvas } from '@storybook/addon-docs';\nimport * as CookieBannerStories from './CookieBanner.stories';\nimport { Hint, Tag } from '../../../components';\n\n<Meta title=\"Components/Cookie banner\" />\n\n<Hint>Components</Hint>\n\n# Cookie banner\n\n<Tag>EXPERIMENTAL</Tag>\n\nThis component is currently experimental because [more research](https://design-system.service.gov.uk/components/cookie-banner/#research-on-this-component) is needed to validate it.\n\n\nAllow users to accept or reject cookies which are not essential to making your service work.\n\n<Canvas of={CookieBannerStories.primary} />\n\n## When to use this component\n\nUse this component if your service sets any cookies on a user’s device.\n\nRemember, you must:\n\n- tell users about the cookies your service sets on their device\n- let users accept or reject any cookies that are not essential to providing your service\n\nThe term ‘non-essential cookies’ includes:\n\n- HTML5 local storage\n- service workers\n- any other technologies that store files on the user’s device\n\nThis cookie banner and the cookies page pattern are based on the approach to getting cookie consent used on the GOV.UK website.\n\nThis component page shows several options for using a cookie banner, based on the types of cookies you’re using in the service. We also tell you what to cover in your cookie banner, with some text examples.\n\n### Before you start\n\nAudit and categorise your cookies as shown in the cookies page pattern to help you choose the best option for your service.\n\nYou must not take the information on this page as legal advice. Your organisation is responsible and accountable for what they do to comply with data protection legislation, such as:\n\n- Privacy and Electronic Communications Regulations (PECR)\n- General Data Protection Regulation (GDPR)\n\nCheck with your organisation’s privacy expert to see how data protection legislation affects your website and service.\n\n## How it works\n\nShow the cookie banner every time the user accesses your service until they either:\n\n- accept or reject cookies using the buttons in the cookie banner\n- save their cookie preferences on the service’s cookies page\n\nOnce the user has accepted or rejected cookies, the cookie banner should:\n\n- hide the cookie banner message\n- show a confirmation message — and a ‘hide’ button to let the user close the banner\n- set a cookie to save the user’s preferences for 1 year\n\nMake sure the cookie banner does not:\n\n- show when the user visits again, once their preferences have been saved\n- set any non-essential cookies unless the user accepted them on a previous visit\n\nPosition the cookie banner after the opening `<body>` tag and before the ’skip to main content‘ link.\n\n### Option 1: If you’re only using essential cookies\n\nYou can choose not to have a cookie banner if the service only sets essential or ‘strictly necessary’ cookies, as these do not need user consent.\n\nHowever, you must tell users that you set essential cookies. You can do this with a cookies page — link to this page in the footer.\n\n### Option 2: If you set non-essential cookies on the server\n\nYou can choose this option if your service sets non-essential cookies on the server — your service may also set non-essential cookies on the client.\n\nTo get consent from the user, display the cookie banner inside a form that lets them submit their choice to accept or reject cookies.\n\nAll users will be able to see the banner as this approach does not rely on JavaScript.\n\nHere’s an example of a cookie banner inside a form:\n\n<Canvas of={CookieBannerStories.insideForm} />\n\nOnce the user has accepted or rejected cookies and set their cookie preferences, reload the page to show a confirmation message.\n\nHere’s an example of a confirmation message inside a form:\n\n<Canvas of={CookieBannerStories.confirmationMessage} />\n\n### Show the same message to all users\n\nIn the cookie banner, tell the user about all the cookies you’re using in the service — whether they’ve enabled JavaScript or not. This way, you will not need to ask the user to give their consent again on their next visit.\n\n### Help users keep their place using progressive enhancement\n\nIf the user is entering information into a form as part of the service, they might lose their place when they submit their choice to accept or reject cookies.\n\nTo help users running JavaScript on their device, you can write some JavaScript code to let them submit their choice and prevent the page from reloading.\n\nInclude all possible messages that the user could see in the cookie banner when the page loads. Hide these with the `hidden` HTML attribute where needed.\n\nHere’s an example of a progressively enhanced cookie banner that includes all possible messages which are hidden using HTML — the cookie banner message is shown using JavaScript to remove the `hidden` attribute:\n\n<Canvas of={CookieBannerStories.hiddenMessages} />\n\nHere’s the same example of a progressively enhanced cookie banner, with the confirmation message shown instead:\n\n<Canvas of={CookieBannerStories.hiddenMessageShown} />\n\n### Option 3: If you set non-essential cookies, but only on the client\n\nYou can choose to make your banner only work with JavaScript if your service only needs to set non-essential cookies on the client.\n\nWhen the page loads, the `hidden` html attribute hides the component, as well as all the cookie banner messages it contains, which the user might otherwise see.\n\n#### Show the cookie banner only to users that have enabled JavaScript\n\nUse JavaScript to show cookie banner messages to users that have not accepted or rejected cookies by removing the `hidden` attribute as needed.\n\nWrite your own JavaScript code so that when the user accepts or rejects cookies, the cookie banner will:\n\n- hide the cookie message by adding the hidden attribute\n- show a confirmation message by removing its hidden attribute\n- give the confirmation message the `tabindex=\"-1\"` and `role=\"alert\"` attributes — this will allow the element to be focused so assistive technology can read the message\n- shift focus to the confirmation message\n\nHere’s an example:\n\n<Canvas of={CookieBannerStories.alertRole} />\n\n#### When the user has accepted cookies\n\nShow a confirmation message confirming that the user has either accepted or rejected cookies by removing the hidden attribute.\n\n<Canvas of={CookieBannerStories.alertRoleAccepted} />\n\n#### When the user has rejected cookies\n\n<Canvas of={CookieBannerStories.alertRoleRejected} />\n\n## What to cover in your cookie banner\n\nInclude the name of the service in the banner heading to help users understand that the cookies you’re talking about are different from the ones set by the main GOV.UK platform.\n\nYou’ll need to change the example cookie banner text if your service:\n\n- allows third parties to set cookies (tell the user that both your organisation and other organisations will be setting cookies)\n- uses cookies for reasons other than collecting analytics information or remembering the user’s settings\n\nKeep the text as short as possible while making sure it’s an accurate description of how you use cookies.\nFor example, if you use more than one ‘functional’ cookie and there’s not enough space to mention what each of them does, you could ask for permission to set cookies so ‘you can use as many of the service’s features as possible’.\n\n### If you’re using essential cookies and analytics cookies\n\nYou can use this example text for a service which sets essential and analytics cookies. Analytics cookies are those set by your organisation to collect information about how people are using your digital service.\n\n<Canvas of={CookieBannerStories.primary} />\n\n### If you’re using more than one type of non-essential cookie\n\nYou can use this example text for a service that set:\n\n- essential cookies\n- analytics cookies\n- functional cookies to remember the user’s settings but are not essential\n\n<Canvas of={CookieBannerStories.nonEssential} />\n\n## Creating a cookies page\n\nYou’ll need a [cookies page]() as well as a cookie banner.\n"],"names":["MDXContent","props","MDXLayout","_provideComponents","_jsx","_createMdxContent","_components","_jsxs","_Fragment","Meta","Hint","Tag","Canvas","CookieBannerStories.primary","CookieBannerStories.insideForm","CookieBannerStories.confirmationMessage","CookieBannerStories.hiddenMessages","CookieBannerStories.hiddenMessageShown","CookieBannerStories.alertRole","CookieBannerStories.alertRoleAccepted","CookieBannerStories.alertRoleRejected","CookieBannerStories.nonEssential"],"mappings":"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"}